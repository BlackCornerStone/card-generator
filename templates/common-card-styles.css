/* Common Card Generator Styles */

/* Base Typography */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px 8px 20px 20px;
    background-color: #f5f5f5;
}

/* Grid Layout */
.grid {
    display: flex;
    flex-wrap: wrap;
    width: 100%;
    /* Use margin-based spacing for broad engine support (fallback for flex gap) */
    margin: -4px;
}

/* Create consistent gaps between cards inside the grid */
.grid > .card {
    margin: 4px;
}

/* Base Card Styles */
.card {
    background-color: white;
    border: 2px solid #333;
    border-radius: 8px;
    padding: 8px;
    margin: 0; /* rely on .grid gap for spacing to avoid extra right-edge margin */
    vertical-align: top;
    page-break-inside: avoid;
    break-inside: avoid;
    font-size: 9px;
    position: relative;
}

/* Card Size Variants */
.card.size-small {
    display: inline-block;
    width: 1.75in;
    height: 2.5in;
}

.card.size-medium {
    display: inline-flex;
    width: 3.5in;
    height: 2.5in;
}

.card.size-big {
    display: inline-flex;
    width: 3.5in;
    height: 2.5in;
}

.card.size-half-page {
    display: flex;
    width: 7.5in;
    height: 5.2in;
}

/* Card Layout Components */
.card-content {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    position: relative;
    z-index: 1; /* ensure content sits above .card-background */
}

.card-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 8px;
    padding: 4px;
    border-radius: 4px;
    /* Ensure header font-size matches title so icons sized with em align to title height */
    font-size: 12px;
}

/* Header background variants (moved from title) */
.card-header.day {
    background-color: white;
    color: #2c3e50;
    border: 1px solid #ddd;
}

.card-header.night {
    background-color: black;
    color: white;
}

.card-header.default {
    background-color: rgba(255, 255, 255, 0.9);
    color: #2c3e50;
    border: 1px solid #ddd;
}

/* Footer panel â€” styled to visually match the header/title */
.card-footer {
    display: flex;
    align-items: center;
    gap: 6px;
    /* push footer to the bottom of the card-content column */
    margin-top: auto;
    padding: 4px;
    border-radius: 4px;
    /* Keep footer text/icon sizing aligned with header/title */
    font-size: 12px;
}

.card-footer.default {
    background-color: rgba(255, 255, 255, 0.9);
    color: #2c3e50;
    border: 1px solid #ddd;
}

/* Footer content text style matching .card-title */
/* Three-slot layout helpers for header and footer */
.card-header .slot-left,
.card-footer .slot-left {
    flex: 1 1 0;
    text-align: left;
}

.card-header .slot-right,
.card-footer .slot-right {
    flex: 1 1 0;
    text-align: right;
}

.card-header .slot-center,
.card-footer .slot-center {
    flex: 0 0 auto;
    text-align: center;
    min-width: 40px;
}

.card-title {
    font-size: 12px;
    font-weight: bold;
    margin: 0;
    padding: 0;
    border-radius: 4px;
}

.card-body {
    display: flex;
    flex: 1;
    /* allow body content to scroll while footer stays fixed at bottom */
    overflow: auto;
}

.card-left {
    width: 120px;
    display: flex;
    flex-direction: column;
    padding-right: 8px;
}

.card-right {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* Background Images */
.card-background {
    position: absolute;
    top: 5px;
    left: 5px;
    right: 5px;
    bottom: 5px;
    border-radius: 5px;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    z-index: 0; /* ensure it's above the card background but below content */
}

/* Content sits above background by default via .card-content; .with-background further elevates */
.card-content.with-background {
    z-index: 2;
}

.header-with-background {
    background: rgba(255, 255, 255, 0.9);
    padding: 4px 6px;
    border-radius: 4px;
    backdrop-filter: blur(2px);
}

/* Typography Styles */
.card-title {
    font-size: 12px;
    font-weight: bold;
    margin: 0;
    padding: 0;
    border-radius: 4px;
    flex: 1;
}

/* Title no longer carries background variants; header does */
.card-title.day { }
.card-title.night { }
.card-title.default { }

/* Badge System */
.badge {
    color: white;
    padding: 2px 5px;
    border-radius: 8px;
    font-size: 8px;
    text-align: center;
    display: inline-block;
    margin-bottom: 0;
    margin-right: 4px;
    white-space: nowrap;
}

/* Align badges to the right within the header */
.card-header > .badge:first-of-type {
    margin-left: auto;
}

.badge.small {
    padding: 2px 4px;
    border-radius: 6px;
    font-size: 7px;
}

/* Badge Color Variants */
.badge.primary { background: #3498db; }
.badge.secondary { background: #9b59b6; }
.badge.success { background: #27ae60; }
.badge.danger { background: #e74c3c; }
.badge.warning { background: #f39c12; }
.badge.info { background: #17a2b8; }

/* Terrain Badge Colors */
.terrain-open { 
    background: #e8f5e8; 
    color: #2d5a2d; 
}

.terrain-difficult { 
    background: #fff3cd; 
    color: #856404; 
}

.terrain-extreme { 
    background: #f8d7da; 
    color: #721c24; 
}

/* Icon Styles */
.icon {
    font-size: 16px;
    margin-right: 4px;
}

/* Title Icon inside header/title area */
.title-icon {
    /* Make the icon square and the same height as the title line */
    height: 1em;      /* em is now relative to .card-header (12px) */
    width: 1em;       /* square */
    display: inline-block;
    vertical-align: middle;
    object-fit: contain; /* keep aspect without cropping */
}

/* Slight spacing when multiple icons appear */
.title-icon + .title-icon {
    margin-left: 2px;
}

/* Stats and Data Display */
.stats-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 6px;
    /* Do not grow to fill the available space; keep minimal height */
    flex: 0 0 auto;
    align-self: flex-start; /* avoid being stretched by parent flex container */
    height: auto;
}

.stats-grid.two-column {
    grid-template-columns: 1fr 1fr;
}

/* Align stats to the right on medium cards */
.stats-grid {
    justify-items: end; /* place items to the right edge of the grid cell */
}
.stat-group {
    text-align: right; /* right-align text within the group */
    background: rgba(248, 249, 250, 0.6);
    padding: 8px;
    margin-right: 4px;
    border-radius: 4px;
    border: 1px solid rgba(222, 226, 230, 0.6);
    /*display: inline-block;*/
    /* Shrink to fit content while not exceeding container */
    width: fit-content;
    max-width: 100%;
    /* In CSS Grid, prevent stretching to full track width */
    /*justify-self: start;*/
}

.stat-group-left {
    position: absolute;
    left: 10px;
    bottom: 10px;
}

.stat-group-right {
    position: absolute;
    right: 10px;
    bottom: 10px;
}

.stat-row,
.stat-column,
.stat-comment,
.stat-value,
.stat-label,
.stat-group h3 {
    text-align: right;
}

.stat-group.transparent {
    background: rgba(248, 249, 250, 0.5);
    backdrop-filter: blur(2px);
}

.stat-group h3 {
    margin: 0 0 4px 0;
    color: #495057;
    font-size: 9px;
    font-weight: bold;
    border-bottom: 1px solid #dee2e6;
    padding-bottom: 2px;
}

.stat-row {
    display: block;
    margin: 2px 0;
    font-size: 8px;
    line-height: 1.2;
}

.stat-column {
    display: table;
    width: 100%;
    margin: 2px 0;
    font-size: 8px;
}

.stat-column > * {
    display: table-cell;
    padding-right: 6px;
    vertical-align: top;
}

.stat-value {
    font-weight: 500;
}

.stat-label {
    color: #666;
    word-break: break-word;
}

.stat-comment {
    color: #333333;
    font-size: 7px;
    font-style: italic;
    display: block;
    margin-top: 1px;
}

/* Images */
.card-image {
    width: 100%;
    border-radius: 4px;
    object-fit: cover;
    margin-bottom: 8px;
}

.card-image.small {
    height: 60px;
}

.card-image.medium {
    height: 80px;
}

/* Note Section */
.note-section {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 4px;
    padding: 6px;
    margin-top: 4px;
    font-size: 7px;
    line-height: 1.3;
}

.note-title {
    font-weight: bold;
    color: #856404;
    margin-bottom: 2px;
}

/* Utility Classes */
.empty-value {
    color: #ccc;
    font-style: italic;
}

.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.mb-1 { margin-bottom: 4px; }
.mb-2 { margin-bottom: 8px; }
.mb-3 { margin-bottom: 12px; }

.p-1 { padding: 4px; }
.p-2 { padding: 8px; }
.p-3 { padding: 12px; }

/* Flex Utilities */
.flex { display: flex; }
.flex-column { flex-direction: column; }
.flex-row { flex-direction: row; }
.flex-1 { flex: 1; }
.justify-between { justify-content: space-between; }
.align-center { align-items: center; }

/* Playing Card Specific Utilities */
.absolute { position: absolute; }
.relative { position: relative; }

.top-2 { top: 8px; }
.left-2 { left: 8px; }
.bottom-2 { bottom: 8px; }
.right-2 { right: 8px; }

.text-sm { font-size: 12px; }
.text-lg { font-size: 18px; line-height: 1; }
.text-6xl { font-size: 72px; line-height: 1; }

.font-bold { font-weight: bold; }
.leading-none { line-height: 1; }

.text-red-600 { color: #dc2626; }
.text-black { color: #000000; }

.speed-table {
    width: 100%;
    border-collapse: collapse;
}

.speed-table tr.odd {
    background-color: rgba(0, 0, 0, 0.05);
}

.rotate-180 { transform: rotate(180deg); }

.center-symbol { 
    position: absolute; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
}

/* Suit Icon Styles */
.suit-icon {
    font-family: "Segoe UI Symbol", "Symbola", "DejaVu Sans", "Arial Unicode MS", Arial, sans-serif;
    font-weight: normal;
    font-style: normal;
}

/* Realm-specific Card Colors */
.card.creation {
    background-color: #e8f5e8;
}

.card.autochthonia {
    background-color: #fff3e0;
}

/* Stats grid modifiers for big-card */
.card.size-big .stats-grid.fixed-2 {
    /* two columns for stat blocks with 40:60 ratio */
    grid-template-columns: 40% 60%;
    column-gap: 6px;
    justify-content: start; /* rely on column-gap for spacing */
}

.stats-grid.align-bottom {
    /* push the entire grid to the bottom of the right column */
    margin-top: auto;
    align-self: stretch; /* take full width of the right panel */
    align-items: end;     /* align items to the bottom within their grid cell */
}
