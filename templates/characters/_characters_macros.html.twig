{% macro dots(val, max, twoLines = false) %}
    {% set v = (val is defined and val is not same as(false) and val is not same as('')) ? (val) : 0 %}
    {% set m = max is defined ? max : 5 %}
    {% set m = m|round(0, 'ceil') %}

    {% if twoLines and val <= 5 %}
        {% set m = 5 %}
    {% endif %}
    <span class="rating x-small-stats">
    {% for i in 1..m %}
      {% if i <= v %}<span class="filled text-dark">‚óè</span>{% else %}<span class="empty text-muted">‚óã</span>{% endif %}
        {% if i == 5 and not loop.last %}
            {% if twoLines %}<br>{% else %}&nbsp;{% endif %}
        {% endif %}
    {% endfor %}
    </span>
{% endmacro %}

{% macro columnBlockStats(title, data, stats, maxRatings, twoLines = false) %}
  <div class="col">
    <h6 class="border-bottom pb-1 mb-1 x-small-stats">{{ title }}</h6>
    {% for statName in stats %}
      <div class="d-flex justify-content-between x-small-stats">
        <span class="text-truncate me-1">{{ statName }}</span>
        <span>{{ _self.dots(data[statName], maxRatings, twoLines) }}</span>
      </div>
    {% endfor %}
  </div>
{% endmacro %}

{% macro shields(val, maxval) %}
    {% set v = (val is defined and val is not same as(false) and val is not same as('')) ? (val) : 0 %}
    {% set m = maxval is defined ? max(val, maxval) : val %}
    {% set m = m|round(0, 'ceil') %}
    <span class="rating shields">
    {% for i in 1..m %}
        {% if i <= v %}<span class="filled">üõ°</span>{% else %}<span class="empty">‚¨ú</span>{% endif %}
    {% endfor %}
  </span>
{% endmacro %}

{% macro swords(val, maxval) %}
    {% set v = (val is defined and val is not same as(false) and val is not same as('')) ? (val) : 0 %}
    {% set m = maxval is defined ? max(val, maxval) : val %}
    {% set m = m|round(0, 'ceil') %}
    <span class="rating swords">
    {% for i in 1..m %}
        {% if i <= v %}<span class="filled">‚öî</span>{% else %}<span class="empty">‚¨ú</span>{% endif %}
    {% endfor %}
  </span>
{% endmacro %}

{% macro soak(val, maxval) %}
    {% set v = (val is defined and val is not same as(false) and val is not same as('')) ? (val) : 0 %}
    {% set m = maxval is defined ? max(val, maxval) : val %}
    {% set m = m|round(0, 'ceil') %}
    Hardness {{ val }}, Soak {{ maxval }}
{#    <span class="rating shields">#}
{#    {% for i in 1..m %}#}
{#        {% if i <= v %}<span class="filled">üõ°</span>{% else %}<span class="empty">‚¨ú</span>{% endif %}#}
{#    {% endfor %}#}
{#    </span>#}
{% endmacro %}